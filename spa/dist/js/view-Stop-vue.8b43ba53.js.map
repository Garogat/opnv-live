{"version":3,"sources":["webpack:///./src/views/Stop.vue?ef8a","webpack:///./src/views/Stop.vue?b6f9","webpack:///src/views/Stop.vue","webpack:///./src/views/Stop.vue?5135","webpack:///./src/views/Stop.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Stop_vue_vue_type_style_index_0_id_378617bc_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Stop_vue_vue_type_style_index_0_id_378617bc_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","stop","stopName","attrs","to","name","_l","bus","key","passageid","route","routeId","routeType","_e","shortName","direction","eta","status","staticRenderFns","Stopvue_type_script_lang_js_","data","computed","stopId","$route","params","methods","join","api","emit","updateStop","i","routes","length","id","minutes","Math","round","actualRelativeTime","plannedTime","concat","mounted","on","beforeDestroy","removeListener","stopShortName","views_Stopvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"iHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAgiBE,EAAG,qECAniB,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAF,EAAA,KAAAI,EAAA,OAA4BE,YAAA,QAAmB,CAAAF,EAAA,MAAWE,YAAA,SAAoB,CAAAN,EAAAO,GAAAP,EAAAQ,GAAAR,EAAAS,KAAAC,aAAAN,EAAA,eAAwDO,MAAA,CAAOC,GAAA,CAAMC,KAAA,UAAiB,CAAAb,EAAAO,GAAA,eAAAH,EAAA,OAAkCE,YAAA,YAAuBN,EAAAc,GAAAd,EAAAS,KAAA,gBAAAM,GAAwC,OAAAX,EAAA,OAAiBY,IAAAD,EAAAE,UAAAX,YAAA,OAAoC,CAAAF,EAAA,OAAYE,YAAA,QAAmB,SAAAN,EAAAkB,MAAAH,EAAAI,SAAAC,UAAAhB,EAAA,KAAuDE,YAAA,eAAyBN,EAAAqB,KAAA,UAAArB,EAAAkB,MAAAH,EAAAI,SAAAC,UAAAhB,EAAA,KAAkEE,YAAA,eAAyBN,EAAAqB,OAAAjB,EAAA,OAAuBE,YAAA,QAAmB,CAAAN,EAAAO,GAAAP,EAAAQ,GAAAR,EAAAkB,MAAAH,EAAAI,SAAAG,cAAAlB,EAAA,OAA+DE,YAAA,aAAwB,CAAAN,EAAAO,GAAAP,EAAAQ,GAAAO,EAAAQ,cAAAnB,EAAA,OAA4CE,YAAA,OAAkB,CAAAN,EAAAO,GAAAP,EAAAQ,GAAAR,EAAAwB,IAAAT,OAAAX,EAAA,OAA2CE,YAAA,UAAqB,cAAAS,EAAAU,OAAArB,EAAA,KAAsCE,YAAA,sBAAgCN,EAAAqB,KAAA,YAAAN,EAAAU,OAAArB,EAAA,KAA8CE,YAAA,iBAA2BN,EAAAqB,KAAA,cAAAN,EAAAU,OAAArB,EAAA,KAAgDE,YAAA,mBAA6BN,EAAAqB,WAAe,OAAAjB,EAAA,OAAmBE,YAAA,WAAsB,CAAAF,EAAA,KAAUE,YAAA,mCAC1nCoB,EAAA,eC4BAC,EAAA,CACAd,KAAA,OACAe,KAFA,WAGA,OACAnB,KAAA,OAGAoB,SAAA,CACAC,OADA,WAEA,OAAA7B,KAAA8B,OAAAC,OAAAvB,OAGAwB,QAAA,CACAC,KADA,WAGAC,EAAA,KAAAC,KAAA,YAAAnC,KAAA6B,SAEAO,WALA,SAKA5B,GACAR,KAAAQ,QAEAS,MARA,SAQAC,GACA,QAAAmB,EAAA,EAAAA,EAAArC,KAAAQ,KAAA8B,OAAAC,OAAAF,GAAA,EACA,GAAArC,KAAAQ,KAAA8B,OAAAD,GAAAG,KAAAtB,EACA,OAAAlB,KAAAQ,KAAA8B,OAAAD,GAIA,aAEAd,IAjBA,SAiBAT,GACA,IAAA2B,EAAAC,KAAAC,MAAA7B,EAAA8B,mBAAA,IAEA,mBAAA9B,EAAAU,OACA,OAGA,YAAAV,EAAAU,OACAV,EAAA+B,YAGAJ,EAAA,EACA,SAGA,GAAAK,OAAAL,EAAA,UAGAM,QA/CA,WAgDA/C,KAAAiC,OAEAC,EAAA,KAAAc,GAAA,UAAAhD,KAAAiC,MAGAC,EAAA,KAAAc,GAAA,OAAAhD,KAAAoC,aAEAa,cAvDA,WAwDAf,EAAA,KAAAgB,eAAA,UAAAlD,KAAAiC,MACAC,EAAA,KAAAgB,eAAA,OAAAlD,KAAAoC,YAEApC,KAAAQ,MACA0B,EAAA,KAAAC,KAAA,aAAAnC,KAAAQ,KAAA2C,iBCzF8UC,EAAA,0BCQ9UC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAtD,EACA2B,GACF,EACA,KACA,WACA,MAIe+B,EAAA,WAAAH","file":"js/view-Stop-vue.8b43ba53.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stop.vue?vue&type=style&index=0&id=378617bc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stop.vue?vue&type=style&index=0&id=378617bc&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.stop)?_c('div',{staticClass:\"stop\"},[_c('h2',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.stop.stopName))]),_c('router-link',{attrs:{\"to\":{ name: 'home' }}},[_vm._v(\"<< Zurück\")]),_c('div',{staticClass:\"arrivals\"},_vm._l((_vm.stop.actual),function(bus){return _c('div',{key:bus.passageid,staticClass:\"bus\"},[_c('div',{staticClass:\"icon\"},[(_vm.route(bus.routeId).routeType === 'bus')?_c('i',{staticClass:\"fas fa-bus\"}):_vm._e(),(_vm.route(bus.routeId).routeType === 'ferry')?_c('i',{staticClass:\"fas fa-bus\"}):_vm._e()]),_c('div',{staticClass:\"line\"},[_vm._v(_vm._s(_vm.route(bus.routeId).shortName))]),_c('div',{staticClass:\"direction\"},[_vm._v(_vm._s(bus.direction))]),_c('div',{staticClass:\"eta\"},[_vm._v(_vm._s(_vm.eta(bus)))]),_c('div',{staticClass:\"status\"},[(bus.status === 'STOPPING')?_c('i',{staticClass:\"fas fa-hand-paper\"}):_vm._e(),(bus.status === 'PLANNED')?_c('i',{staticClass:\"fas fa-clock\"}):_vm._e(),(bus.status === 'PREDICTED')?_c('i',{staticClass:\"fas fa-running\"}):_vm._e()])])}),0)],1):_c('div',{staticClass:\"loading\"},[_c('i',{staticClass:\"fas fa-circle-notch fa-spin\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"stop\" class=\"stop\">\n    <h2 class=\"title\">{{ stop.stopName }}</h2>\n    <router-link :to=\"{ name: 'home' }\">&lt;&lt; Zurück</router-link>\n    <div class=\"arrivals\">\n      <div class=\"bus\" v-for=\"bus in stop.actual\" :key=\"bus.passageid\">\n        <div class=\"icon\">\n          <i v-if=\"route(bus.routeId).routeType === 'bus'\" class=\"fas fa-bus\"></i>\n          <i v-if=\"route(bus.routeId).routeType === 'ferry'\" class=\"fas fa-bus\"></i>\n        </div>\n        <div class=\"line\">{{ route(bus.routeId).shortName }}</div>\n        <div class=\"direction\">{{ bus.direction }}</div>\n        <div class=\"eta\">{{ eta(bus) }}</div>\n        <div class=\"status\">\n          <i v-if=\"bus.status === 'STOPPING'\" class=\"fas fa-hand-paper\"></i>\n          <i v-if=\"bus.status === 'PLANNED'\" class=\"fas fa-clock\"></i>\n          <i v-if=\"bus.status === 'PREDICTED'\" class=\"fas fa-running\"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"loading\">\n    <i class=\"fas fa-circle-notch fa-spin\"></i>\n  </div>\n</template>\n\n<script>\nimport Api from '@/api';\n\nexport default {\n  name: 'stop',\n  data() {\n    return {\n      stop: null,\n    };\n  },\n  computed: {\n    stopId() {\n      return this.$route.params.stop;\n    },\n  },\n  methods: {\n    join() {\n      // request server to join stop room\n      Api.emit('stop:join', this.stopId);\n    },\n    updateStop(stop) {\n      this.stop = stop;\n    },\n    route(routeId) {\n      for (let i = 0; i < this.stop.routes.length; i += 1) {\n        if (this.stop.routes[i].id === routeId) {\n          return this.stop.routes[i];\n        }\n      }\n\n      return null;\n    },\n    eta(bus) {\n      const minutes = Math.round(bus.actualRelativeTime / 60);\n\n      if (bus.status === 'STOPPING') {\n        return 'hält';\n      }\n\n      if (bus.status === 'PLANNED') {\n        return bus.plannedTime;\n      }\n\n      if (minutes < 1) {\n        return 'sofort';\n      }\n\n      return `${minutes} Min`;\n    },\n  },\n  mounted() {\n    this.join();\n\n    Api.on('connect', this.join);\n\n    // wait for stop updates\n    Api.on('stop', this.updateStop);\n  },\n  beforeDestroy() {\n    Api.removeListener('connect', this.join);\n    Api.removeListener('stop', this.updateStop);\n\n    if (this.stop) {\n      Api.emit('stop:leave', this.stop.stopShortName);\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  .stop {\n    display: flex;\n    flex-flow: column;\n    width: 100%;\n    align-items: center;\n  }\n\n  .title {\n    margin: 1rem 0;\n    font-size: 1.8rem;\n  }\n\n  .arrivals {\n    display: flex;\n    flex-flow: column;\n    width: 100%;\n    max-width: 40rem;\n  }\n\n  .bus {\n    display: flex;\n    padding: 1rem;\n    flex-flow: row;\n    width: 100%;\n    box-shadow: inset 0 -1px 0 0 rgba(100,121,143,0.122);\n    text-align: left;\n    cursor: pointer;\n\n    &:hover {\n      -webkit-box-shadow: inset 1px 0 0 #dadce0, inset -1px 0 0 #dadce0, 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);\n      box-shadow: inset 1px 0 0 #dadce0, inset -1px 0 0 #dadce0, 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);\n      z-index: 1;\n    }\n\n    * {\n      display: flex;\n      align-items: center;\n    }\n\n    .icon {\n      margin-right: .5rem;\n    }\n\n    .line {\n      width: 1.5rem;\n    }\n\n    .direction {\n      margin-left: 1rem;\n      flex-grow: 1;\n    }\n\n    .eta {\n      width: 20%;\n      justify-content: flex-end;\n    }\n\n    .status {\n      width: 10%;\n      justify-content: center;\n      font-size: 1.5rem;\n    }\n  }\n\n  .loading {\n    margin: auto;\n    font-size: 4rem;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Stop.vue?vue&type=template&id=378617bc&scoped=true&\"\nimport script from \"./Stop.vue?vue&type=script&lang=js&\"\nexport * from \"./Stop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Stop.vue?vue&type=style&index=0&id=378617bc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"378617bc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}